<HTML>

  

<BODY>    
<div class="ui">
    <div class="controls">
        Area Circle X: <input id="rx" type="range" min="1" max="2000"/><br><br><br>
        Area Circle Y: <input id="ry" type="range" min="1" max="2000" disabled="disabled"/><br><br><br>
		Area    Union: <input id="aUnion" type="range" min="1" max="2000" value="1" disabled="disabled"/><br>
    </div>
    <div class="results">
        Circle X Area: <span style="color:blue" id="AreaXvalue"></span>  Radius: <span style="color:blue" id="RadiusXvalue"></span><br>
        Circle Y Area: <span style="color:blue" id="AreaYvalue"></span>  Radius: <span style="color:blue" id="RadiusYvalue"></span><br>
		Union Area: <span style="color:blue" id="AreaUvalue"></span>  Iterations: <span style="color:blue" id="CircDist"></span><br>
        Circle X Angle: <span style="color:blue" id="AngleXvalue"></span><br>
        Circle Y Angle: <span style="color:blue" id="AngleYvalue"></span><br>
        Starter Union Area: <span style="color:blue" id="StartAreaUvalue"></span><br>
		Test Union Area: <span style="color:blue" id="TestAreaUvalue"></span><br>
        

    </div>
</div>


  <style>

    path:hover {stroke:black;}
	.ui {
            display: flex;
        }

        .ui > div {
            margin: 0 10px;
        }

        .ui .controls input {
            vertical-align: middle;
        }
	    .ui .results {
            float: right;
        }
        svg {
            background: #ddd;
        }

  </style>

  

  <svg width="700" height="560" xmlns="http://www.w3.org/2000/svg">
    <path id="arc1"  d="" fill="blue" fill-opacity=".5"/>
    <path id="arc2" d="" fill="yellow" fill-opacity=".5"/> 
    <path id="arc3" d="" fill="green" fill-opacity=".5"/> 		 
	
  </svg>

  <script>
    //capture all the element you plan to change
	var AreaXE1 = document.getElementById("AreaXvalue");
	var RadiusXE1 = document.getElementById("RadiusXvalue");
	var AngleXE1 = document.getElementById("AngleXvalue");
	var AreaXInputE1 = document.getElementById("rx");
	var DistE1 = document.getElementById("CircDist");
	
	var AreaYE1 = document.getElementById("AreaYvalue");
	var RadiusYE1 = document.getElementById("RadiusYvalue");
	var AngleYE1 = document.getElementById("AngleYvalue");
	var AreaYInputE1 = document.getElementById("ry");
	
	var AreaUE1 = document.getElementById("AreaUvalue");
	var AreaUInputE1 = document.getElementById("aUnion");
	
	var StartAreaUE1 = document.getElementById("StartAreaUvalue");
	var TestAreaUE1 = document.getElementById("TestAreaUvalue");
	
	var PathArc1E1 = document.getElementById("arc1");
	var PathArc2E1 = document.getElementById("arc2");
	var PathArc3E1 = document.getElementById("arc3");
	
	
	var EasyPI = Math.round(Math.PI*100000)/100000;
	var RadiusX;
	var RadiusY;
	var AreaX;
	var AreaY=0;
	var AreaU=0;
	var StartAreaU;
	var TestAreaU=-1;
	var AngleX;
	var AngleY;
	var DistX;
	var DistY;
	var arcDist;
	var AcuteAngle=false;
	var EscapeHatch=0;
	var AngleMove=EasyPI/2;
	
	//fires continuously
	AreaXInputE1.addEventListener("input", function(){UpdateXNumbers(this.value);});
	AreaYInputE1.addEventListener("input", function(){UpdateYNumbers(this.value);});
	AreaUInputE1.addEventListener("input", function(){UpdateUNumbers(this.value);});
	AreaXInputE1.addEventListener("oninput", function(){UpdateXNumbers(this.value);});
	AreaYInputE1.addEventListener("oninput", function(){UpdateYNumbers(this.value);});
	AreaUInputE1.addEventListener("oninput", function(){UpdateUNumbers(this.value);});
	AreaXInputE1.addEventListener("onchange", function(){UpdateXNumbers(this.value);});
	AreaYInputE1.addEventListener("onchange", function(){UpdateYNumbers(this.value);});
	AreaUInputE1.addEventListener("onchange", function(){UpdateUNumbers(this.value);});
	//fires when the user releases the mouse
	AreaXInputE1.addEventListener("mouseup", function(){FireXNumbers(this.value);});
	AreaYInputE1.addEventListener("mouseup", function(){FireYNumbers(this.value);});
	AreaUInputE1.addEventListener("mouseup", function(){FireUNumbers(this.value);});
	//fires when the user releases the finger
	AreaXInputE1.addEventListener("touchend", function(){FireXNumbers(this.value);});
	AreaYInputE1.addEventListener("touchend", function(){FireYNumbers(this.value);});
	AreaUInputE1.addEventListener("touchend", function(){FireUNumbers(this.value);});
	
	function UpdateXNumbers(e)
	{
	 AreaX=e;
	 AreaXE1.innerHTML="test";
	 
	 //update the Area value if it is greater than the smallest circle 
	 AreaUInputE1.max=AreaX;
	 AreaYInputE1.min=AreaX;
	 
	} 
	function FireXNumbers(e)
	{
	  //unlock Circle Y input
	  if(ry.disabled)
	  {
	    ry.disabled=false;
	  }
	  else if(AreaY!=0)
	  {
	    DoMathStuff();
	    BuildArcs();
	  }
	}
	
	function UpdateYNumbers(e)
	{
	 AreaY=e;
	 AreaYE1.textContent=e;
	 //update the Area value if it is greater than the smallest circle 
	 AreaXInputE1.max=AreaY;
	}
	 
	function FireYNumbers(e)
	{
      if(AreaY!=0)
	  {	
	   DoMathStuff();
	   BuildArcs();
	   //unlock Area Input
	   if(aUnion.disabled){aUnion.disabled=false;} 
	  }
	} 
	
	function UpdateUNumbers(e)
	{
	 AreaU=Math.round(e);
	 AreaUE1.textContent=AreaU;
	 //Make sure the user cant make the smallest circle smaller than the union 
	 AreaXInputE1.min=AreaU;
	}
	function FireUNumbers(e) 
	{
	 DoMathStuff();
	 BuildArcs();
	}
	
	function DoMathStuff()
	{
  	   //do math stuff
	   //find the radiuses given the areas
	   RadiusY=Math.round(Math.sqrt(AreaY/EasyPI)*100)/100;
	   RadiusX=Math.round(Math.sqrt(AreaX/EasyPI)*100)/100;
   	   
	   //make the angle of the small circle to the join point 90 degrees
	   AngleX=EasyPI/2;
	   //the distance of the begining arc is 2 x the radius of corcle x
	   arcDist = RadiusX*2*Math.sin(AngleX);
	   //the distance of the begining X cirle to the join line is 0
	   DistX=Math.cos(AngleX)*RadiusX;
	   
	   //find the angle of the large circle to the join point
	   AngleY=Math.round(Math.asin((arcDist*.5)/(RadiusY))*100000)/100000;
	   //the distance of the begining Y cirle to the join line 
	   DistY=Math.cos(AngleY)*RadiusY;
       //find the area of the union 
	   StartAreaU=(AreaX*((AngleX)/(EasyPI))-(DistX*arcDist*.5))+(AreaY*((AngleY)/(EasyPI))-(DistY*arcDist*.5));
	   if(AreaU!=0)
	   {
	    //is the Area greater than the start area?
		if(AreaU>StartAreaU)
		{
		  AcuteAngle=false;
		   TestAreaU=StartAreaU;
		  //test 135 degrees
		  AngleMove=EasyPI/2;
		  EscapeHatch=1;
		  do
		  {
		    EscapeHatch++;
			AngleMove=AngleMove/2;
			if(TestAreaU>AreaU)
			{
		     AngleX=AngleX-AngleMove;
			}
            else
            {
			 AngleX=AngleX+AngleMove;
            } 			
		    arcDist = RadiusX*2*Math.sin(AngleX);
		    DistX=Math.cos(AngleX)*RadiusX;;
		    AngleY=Math.asin((arcDist*.5)/(RadiusY));
		    DistY=Math.cos(AngleY)*RadiusY;
		    TestAreaU=(AreaX*((AngleX*2)/(2*EasyPI))-(DistX*arcDist*.5))+(AreaY*((AngleY*2)/(2*EasyPI))-(DistY*arcDist*.5));
		    TestAreaU=Math.round(TestAreaU);
		  }
           while((AreaU!=TestAreaU)&&EscapeHatch<20);  		  
		}
		else if(AreaU<StartAreaU)
		{
		  AcuteAngle=true;
		  TestAreaU=StartAreaU;
		  //test 45 degrees
		  AngleMove=EasyPI/2;
		  EscapeHatch=1;
          do
          {		  
		    EscapeHatch++;
			AngleMove=AngleMove/2;
			if(TestAreaU>AreaU)
			{
		     AngleX=AngleX-AngleMove;
			}
            else
            {
			 AngleX=AngleX+AngleMove;
            } 			
		    arcDist = RadiusX*2*Math.sin(AngleX);
		    DistX=Math.cos(AngleX)*RadiusX;;
		    AngleY=Math.asin((arcDist*.5)/(RadiusY));
		    DistY=Math.cos(AngleY)*RadiusY;
		    TestAreaU=(AreaX*((AngleX*2)/(2*EasyPI))-(DistX*arcDist*.5))+(AreaY*((AngleY*2)/(2*EasyPI))-(DistY*arcDist*.5));
		    TestAreaU=Math.round(TestAreaU);
		  } 
		  while((AreaU!=TestAreaU)&&EscapeHatch<20); 
		}
	   }
       	   
		
	 //show results
	 RadiusYE1.textContent=RadiusY;
	 RadiusXE1.textContent=RadiusX;
	 AngleXE1.textContent=AngleX;
	 AngleYE1.textContent=AngleY;
	 StartAreaUE1.textContent=StartAreaU;
	 TestAreaUE1.textContent=TestAreaU;
	 DistE1.textContent=EscapeHatch;
	}
	function BuildArcs()
	{
	   
	  if(AcuteAngle)
	  {
	    var PathArc1Str = "M200,100 a " + RadiusX*5 + "," + RadiusX*5 + ", 0, 1, 0, 0, " + arcDist*5 + "  a " + RadiusY*5 + "," + RadiusY*5 + ", 0, 0, 1, 0, -" + arcDist*5 + " z";
  	    var PathArc2Str = "M200,100 a " + RadiusY*5 + "," + RadiusY*5 + ", 0, 1, 1, 0, " + arcDist*5 + "  a " + RadiusX*5 + "," + RadiusX*5 + ", 0, 0, 0, 0, -" + arcDist*5 + " z";
	    var PathArc3Str = "M200,100 a " + RadiusY*5 + "," + RadiusY*5 + ", 0, 0, 0, 0, " + arcDist*5 + "  a " + RadiusX*5 + "," + RadiusX*5 + ", 0, 0, 0, 0, -" + arcDist*5 + " z";
	  }
	  else
	  {
	    var PathArc1Str = "M200,100 a " + RadiusX*5 + "," + RadiusX*5 + ", 0, 0, 0, 0, " + arcDist*5 + "  a " + RadiusY*5 + "," + RadiusY*5 + ", 0, 0, 1, 0, -" + arcDist*5 + " z";
	    var PathArc2Str = "M200,100 a " + RadiusY*5 + "," + RadiusY*5 + ", 0, 1, 1, 0, " + arcDist*5 + "  a " + RadiusX*5 + "," + RadiusX*5 + ", 0, 1, 0, 0, -" + arcDist*5 + " z";
	    var PathArc3Str = "M200,100 a " + RadiusY*5 + "," + RadiusY*5 + ", 0, 0, 0, 0, " + arcDist*5 + "  a " + RadiusX*5 + "," + RadiusX*5 + ", 0, 1, 0, 0, -" + arcDist*5 + " z";
	  }
	  
	  	  
	  PathArc1E1.setAttribute("d",PathArc1Str);
	  PathArc2E1.setAttribute("d",PathArc2Str);
	  PathArc3E1.setAttribute("d",PathArc3Str);
	  
	  
	  
	}
  </script>

  </BODY>

</HTML>  
